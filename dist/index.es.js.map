{"version":3,"file":"index.es.js","sources":["../src/icons.js","../src/lang.js","../src/utils.js","../node_modules/style-inject/dist/style-inject.es.js","../src/ReactWeather.tsx"],"sourcesContent":["export default {\n  \"01d\": \"wi-day-sunny\",\n  \"02d\": \"wi-day-cloudy\",\n  \"03d\": \"wi-cloudy\",\n  \"04d\": \"wi-cloudy\",\n  \"09d\": \"wi-showers\",\n  \"10d\": \"wi-day-rain\",\n  \"11d\": \"wi-day-thunderstorm\",\n  \"13d\": \"wi-day-snow-thunderstorm\",\n  \"50d\": \"wi-fog\",\n  \"01n\": \"wi-day-sunny\",\n  \"02n\": \"wi-day-cloudy\",\n  \"03n\": \"wi-cloudy\",\n  \"04n\": \"wi-cloudy\",\n  \"09n\": \"wi-showers\",\n  \"10n\": \"wi-day-rain\",\n  \"11n\": \"wi-day-thunderstorm\",\n  \"13n\": \"wi-day-snow-thunderstorm\",\n  \"50n\": \"wi-fog\",\n};\n","export default {\n  en: {\n    wind: \"Wind\",\n    humidity: \"Humidity\",\n    uvi: \"UV Index\",\n    precipitation: \"Chance of rain\",\n    todayWeather: \"Today's Weather\",\n  },\n  es: {\n    wind: \"Viento\",\n    humidity: \"Humedad\",\n    uvi: \"Índice UV\",\n    precipitation: \"Probabilidad de lluvia\",\n    todayWeather: \"El tiempo de hoy\",\n  },\n  pt: {\n    wind: \"Vento\",\n    humidity: \"Umidade\",\n    uvi: \"Índice UV\",\n    precipitation: \"Chance de chover\",\n    todayWeather: \"Clima de hoje\",\n  },\n  ru: {\n    wind: \"Ветер\",\n    humidity: \"Влажность\",\n    uvi: \"УФ-индекс\",\n    precipitation: \"Вероятность осадков\",\n    todayWeather: \"Погода сегодня\",\n  },\n};\n","import moment from \"moment\";\nimport icons from \"./icons\";\nimport langText from \"./lang\";\n\nexport function getIcon(icon) {\n  if (!icon) {\n    return \"na\";\n  }\n  const icoClass = icons[icon];\n  if (icoClass) {\n    return icoClass;\n  }\n  return \"na\";\n}\n\nexport function getUnits(unit) {\n  if (unit === \"metric\") {\n    return {\n      temp: \"°C\",\n      speed: \"km/h\",\n    };\n  } else if (unit === \"imperial\") {\n    return {\n      temp: \"°F\",\n      speed: \"mph\",\n    };\n  }\n  return { temp: \"\", speed: \"\" };\n}\n\nexport function formatDateTime(dte, lang) {\n  if (dte && moment(dte).isValid()) {\n    moment.locale(lang);\n    return moment.unix(dte).format(\"dddd D, HH:mm\");\n  }\n  return \"\";\n}\n\nexport function getLangs(lang) {\n  return langText[lang] === undefined ? langText.en : langText[lang];\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useEffect, useState } from \"react\";\nimport { getIcon, getLangs, getUnits, formatDateTime } from \"./utils\";\n\nimport fetch from \"isomorphic-unfetch\";\n\nimport \"./ReactWeather.sass\";\n\nconst endPointToday = \"https://api.openweathermap.org/data/2.5/onecall\";\n\ninterface ReactWeatherProps {\n  lat: string;\n  lon: string;\n  city?: string;\n  apiKey: string;\n  lang?: \"en\" | \"es\" | \"pt\" | \"ru\";\n  unit?: \"metric\" | \"imperial\";\n  loadingComponent?: JSX.Element;\n}\n\nconst ReactWeather: React.FC<ReactWeatherProps> = ({\n  lat,\n  lon,\n  city,\n  apiKey,\n  lang = \"en\",\n  unit = \"metric\",\n  loadingComponent,\n}) => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    const params = {\n      appid: apiKey,\n      units: unit,\n      lang,\n      lat,\n      lon,\n    } as { [key: string]: string };\n\n    const url = new URL(endPointToday);\n    Object.keys(params).forEach((key) =>\n      url.searchParams.append(key, params[key])\n    );\n\n    fetch(String(url))\n      .then((response) => {\n        return response.json();\n      })\n      .then((resp) => {\n        const todayData = resp.current;\n        const minuteData = resp.minutely;\n\n        if (todayData) {\n          setData({\n            description: todayData.weather[0].description,\n            icon: todayData.weather[0].icon,\n            temperature: {\n              current: todayData.temp.toFixed(0),\n            },\n            wind: todayData.wind_speed.toFixed(0),\n            humidity: todayData.humidity,\n            date: formatDateTime(todayData.dt, lang),\n            uvi: todayData.uvi,\n            precipitation: minuteData ? minuteData[0].precipitation * 100 : \"-\",\n          });\n        }\n      });\n  }, [lang]);\n\n  if (!data) return loadingComponent || <div>Loading...</div>;\n\n  const todayIcon = getIcon(data.icon);\n  const units = getUnits(unit);\n  const langs = getLangs(lang);\n\n  return (\n    <div className=\"rw-main\">\n      <div className=\"rw-box\">\n        <div className=\"rw-box__top\">\n          <div>\n            <p>{langs.todayWeather}</p>\n\n            <div className=\"current-temp\">\n              <i className={`wicon wi ${todayIcon}`}></i>\n\n              <span className=\"current-temp__temp\">\n                {data.temperature.current} {units.temp}\n              </span>\n\n              <span>{data.description}</span>\n            </div>\n          </div>\n\n          <div className=\"current-dt\">\n            {city}\n            <br />\n            {data.date}\n          </div>\n        </div>\n\n        <div className=\"rw-box__bottom\">\n          <div>\n            {langs.wind}\n            <br />\n            {data.wind} {units.speed}\n          </div>\n\n          <div>\n            {langs.uvi}\n            <br />\n            {data.uvi}\n          </div>\n\n          <div>\n            {langs.humidity}\n            <br />\n            {data.humidity}%\n          </div>\n\n          <div>\n            {langs.precipitation}\n            <br />\n            {data.precipitation}%\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReactWeather;\n"],"names":[],"mappings":"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"}